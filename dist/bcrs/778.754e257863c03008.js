"use strict";(self.webpackChunkbcrs=self.webpackChunkbcrs||[]).push([[778],{9778:(ae,p,u)=>{u.r(p),u.d(p,{SecurityModule:()=>se});var c=u(6814),l=u(9310),e=u(4946);let h=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(i,r){1&i&&e._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2}),n})();var o=u(95),_=u(459),f=u(9862);let g=(()=>{var t;class n{constructor(i){this.http=i}signIn(i,r){return this.http.post("/api/security/signin",{email:i,password:r})}registration(i){return this.http.post("/api/register/registration",{user:i})}verifyEmail(i){return this.http.post("api/security/employees/"+i,{})}changePassword(i,r){return this.http.post("api/security/verify/users/"+i+"/reset-password",{password:r})}findSelectedSecurityQuestions(i){return this.http.get("/api/security/verify/users/"+i+"/security-questions")}verifySecurityQuestions(i,r){return this.http.post("/api/security/verify/users/"+i+"/security-questions",{securityQuestions:r})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function v(t,n){if(1&t&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.errorMessage," ")}}function y(t,n){1&t&&(e.TgZ(0,"div")(1,"div",19),e._uU(2," Email is required. "),e._UZ(3,"input",20),e.qZA()())}function b(t,n){1&t&&(e.TgZ(0,"div")(1,"div",19),e._uU(2," Please enter a valid email address. "),e._UZ(3,"input",20),e.qZA()())}function q(t,n){1&t&&(e.TgZ(0,"div")(1,"div",19),e._uU(2," Password must be at least 8 characters and contain at least one uppercase letter, one lowercase letter, and one number "),e._UZ(3,"input",20),e.qZA()())}function x(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"Sign In"),e.qZA())}function w(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"span",21),e._uU(2,"Loading... "),e.qZA())}function C(t,n){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s)}}function S(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Question is required. "),e.qZA())}function T(t,n){if(1&t&&(e.TgZ(0,"div",25),e.YNc(1,S,2,0,"div",26),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.registerForm.controls.question1.hasError("required"))}}function P(t,n){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s)}}function F(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Question is required. "),e.qZA())}function I(t,n){if(1&t&&(e.TgZ(0,"div",25),e.YNc(1,F,2,0,"div",26),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.registerForm.controls.question2.hasError("required"))}}function A(t,n){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s)}}function Q(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Question is required. "),e.qZA())}function M(t,n){if(1&t&&(e.TgZ(0,"div",25),e.YNc(1,Q,2,0,"div",26),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.registerForm.controls.question3.hasError("required"))}}function N(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.errorMessage," ")}}function k(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Email is required "),e.qZA())}function J(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"span",9),e._uU(2," Loading... "),e.qZA())}function Y(t,n){if(1&t&&(e.TgZ(0,"div")(1,"div",13),e._uU(2),e.qZA()()),2&t){const s=e.oxw();e.xp6(2),e.hij(" ",s.errorMessage," ")}}function L(t,n){1&t&&(e.TgZ(0,"div",14)(1,"span",15),e._uU(2,"Loading..."),e.qZA()())}function R(t,n){if(1&t&&(e.TgZ(0,"label",16),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Oqu(s.question1)}}function E(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Answer is required."),e.qZA())}function V(t,n){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,E,2,0,"div",2),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.sqForm.controls.answer2.hasError("required"))}}function z(t,n){if(1&t&&(e.TgZ(0,"label",17),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Oqu(s.question2)}}function j(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Answer is required."),e.qZA())}function G(t,n){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,j,2,0,"div",2),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.sqForm.controls.answer2.hasError("required"))}}function B(t,n){if(1&t&&(e.TgZ(0,"label",18),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Oqu(s.question3)}}function X(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Answer is required."),e.qZA())}function $(t,n){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,X,2,0,"div",2),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.sqForm.controls.answer3.hasError("required"))}}function H(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"Submit"),e.qZA())}function W(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"span",19),e._uU(2," Loading... "),e.qZA())}function K(t,n){if(1&t&&(e.TgZ(0,"div",7)(1,"div",16)(2,"div",17),e._uU(3),e.qZA()()()),2&t){const s=e.oxw();e.xp6(3),e.hij(" ",s.errorMessage," ")}}function ee(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Password Is required. "),e.qZA())}function te(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, and a number. "),e.qZA())}function re(t,n){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,ee,2,0,"div",14),e.YNc(2,te,2,0,"div",14),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.changePasswordForm.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.changePasswordForm.controls.password.hasError("pattern"))}}function oe(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"span",19),e._uU(2," Loading... "),e.qZA())}const ie=[{path:"",component:h,title:"BCRS: Security",children:[{path:"signin",component:(()=>{var t;class n{constructor(i,r,a,d,m){this.fb=i,this.router=r,this.cookieService=a,this.secService=d,this.route=m,this.isLoading=!1,this.signinForm=this.fb.group({email:[null,o.kI.compose([o.kI.required,o.kI.email])],password:[null,o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.errorMessage="",this.sessionUser={}}signIn(){this.isLoading=!0,console.log("Sign in Form:",this.signinForm.value);let i=this.signinForm.controls.email.value,r=this.signinForm.controls.password.value;if(!i||!r)return this.errorMessage="Please provide an email address and password.",void(this.isLoading=!1);this.secService.signIn(i,r).subscribe({next:a=>{console.log("User:",a),this.sessionUser=a,this.cookieService.set("session_user",JSON.stringify(this.sessionUser),1);const d=this.route.snapshot.queryParamMap.get("returnUrl")||"/service-repair";this.isLoading=!1,this.router.navigate([d])},error:a=>{this.isLoading=!1,console.log("err",a),this.errorMessage=a.error.message?a.error.message:a.message}})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(o.qu),e.Y36(l.F0),e.Y36(_.N),e.Y36(g),e.Y36(l.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-signin"]],decls:37,vars:7,consts:[[1,"page-container"],[1,"grid-container"],[1,"img-container"],["src","../../../assets/signin-computer-guy.jpg",1,"grid-item"],["id","signin-padding",1,"grid-item"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"info-container"],[1,"form-info"],["type","text","id","email","formControlName","email","placeholder","Email",1,"form-control"],[4,"ngIf"],["type","password","id","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit"],["routerLink","/security/registration"],["routerLink","/security/verify-email"],["routerLink","/","id","return",1,"info-container"],["id","logo","src","../../../assets/snek.jpg"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,v,2,1,"div",5),e.TgZ(6,"div",6)(7,"form",7),e.NdJ("ngSubmit",function(){return r.signIn(),r.signinForm.reset()}),e.TgZ(8,"div",8)(9,"div",9)(10,"h2"),e._uU(11,"Sign In"),e.qZA(),e._UZ(12,"input",10),e.qZA()(),e.YNc(13,y,4,0,"div",11),e.YNc(14,b,4,0,"div",11),e.TgZ(15,"div",8)(16,"div",9),e._UZ(17,"input",12),e.qZA()(),e.YNc(18,q,4,0,"div",11),e._UZ(19,"br"),e.TgZ(20,"div",8)(21,"button",13),e.YNc(22,x,2,0,"span",11),e.YNc(23,w,3,0,"div",11),e.qZA()(),e.TgZ(24,"div",8)(25,"div"),e._uU(26,"Don't have an account? "),e.TgZ(27,"a",14),e._uU(28,"Register"),e.qZA()(),e.TgZ(29,"a",15),e._uU(30,"Forgot Password?"),e.qZA()(),e.TgZ(31,"a",16),e._uU(32,"Return"),e.qZA()(),e._UZ(33,"img",17)(34,"br")(35,"br")(36,"br"),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("ngIf",r.errorMessage),e.xp6(2),e.Q6J("formGroup",r.signinForm),e.xp6(6),e.Q6J("ngIf",r.signinForm.controls.email.touched&&r.signinForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",r.signinForm.controls.email.touched&&r.signinForm.controls.email.hasError("email")),e.xp6(4),e.Q6J("ngIf",r.signinForm.controls.password.touched&&r.signinForm.controls.password.hasError("pattern")),e.xp6(4),e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading))},dependencies:[c.O5,l.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".page-container[_ngcontent-%COMP%]{background-color:#86d3b9}.grid-container[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,1fr)}.grid-item[_ngcontent-%COMP%]{background-color:#6dc89a;text-align:center}#signin-padding[_ngcontent-%COMP%]{padding-bottom:300px}h2[_ngcontent-%COMP%]{margin-top:80px;font-size:40px;margin-bottom:50px}.info-container[_ngcontent-%COMP%]{margin:0 auto}input[_ngcontent-%COMP%]{height:60px;margin-top:30px}.form-container[_ngcontent-%COMP%]{width:300px;margin:0 auto}label[_ngcontent-%COMP%]{font-size:25px;text-align:left;background-color:red}img[_ngcontent-%COMP%]{width:70%}.img-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-of-type{width:75%;margin:200px auto 0 100px;box-shadow:5px 5px 10px #4d5853}#logo[_ngcontent-%COMP%]{width:40%;margin:60px auto 0;box-shadow:5px 10px 15px #4d5853}button[_ngcontent-%COMP%]{border:none;padding:15px;width:100px;margin-bottom:50px;border-radius:20px;background-color:#2dafa4}button[_ngcontent-%COMP%]:hover{color:#fff}a[_ngcontent-%COMP%]{color:#4d5853}a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:none}"]}),n})(),title:"BCRS: Signin"},{path:"registration",component:(()=>{var t;class n{constructor(i,r,a){this.router=i,this.fb=r,this.securityService=a,this.registerForm=this.fb.group({email:[null,o.kI.compose([o.kI.required,o.kI.email])],password:[null,o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])],firstName:[null,o.kI.compose([o.kI.required])],lastName:[null,o.kI.compose([o.kI.required])],phoneNumber:[null,o.kI.compose([o.kI.required])],address:[null,o.kI.compose([o.kI.required])],question1:[null,o.kI.compose([o.kI.required])],answer1:[null,o.kI.compose([o.kI.required])],question2:[null,o.kI.compose([o.kI.required])],answer2:[null,o.kI.compose([o.kI.required])],question3:[null,o.kI.compose([o.kI.required])],answer3:[null,o.kI.compose([o.kI.required])]}),this.securityQuestions=["What is your favorite food?","What city were you born in?","What is the name of your first pet?"],this.qArr1=this.securityQuestions,this.qArr2=[],this.qArr3=[],this.employee={},this.errorMessage=""}ngOnInit(){this.registerForm.get("question1")?.valueChanges.subscribe(i=>{console.log("Value changed from question 1",i),this.qArr2=this.qArr1.filter(r=>r!==i)}),this.registerForm.get("question2")?.valueChanges.subscribe(i=>{console.log("Value changed from question 2",i),this.qArr3=this.qArr2.filter(r=>r!==i)})}register(){this.employee={email:this.registerForm.get("email")?.value,password:this.registerForm.get("password")?.value,firstName:this.registerForm.get("firstName")?.value,lastName:this.registerForm.get("lastName")?.value,phoneNumber:this.registerForm.get("phoneNumber")?.value,address:this.registerForm.get("address")?.value,selectedSecurityQuestions:[{question:this.registerForm.get("question1")?.value,answer:this.registerForm.get("answer1")?.value},{question:this.registerForm.get("question2")?.value,answer:this.registerForm.get("answer2")?.value},{question:this.registerForm.get("question3")?.value,answer:this.registerForm.get("answer3")?.value}]},console.log("Registering new user",this.employee),this.securityService.registration(this.employee).subscribe({next:i=>{console.log("Result from Register API call: ",i),this.router.navigate(["/security/signin"])},error:i=>{i.error.message?(console.log("db error: ",i.error.message),this.errorMessage=i.error.message):this.errorMessage="Something went wrong. Please contact the system administrator."}})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(l.F0),e.Y36(o.qu),e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registration"]],decls:55,vars:8,consts:[[1,"main-container"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-info-container"],[1,"register-container"],["type","text","id","firstName","formControlName","firstName","placeholder","Name","required",""],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name"],["type","text","id","email","formControlName","email","name","email","placeholder","Email","required",""],["type","password","id","password","formControlName","password","placeholder","Password",1,"password"],["type","text","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number",1,"phoneNumber"],["type","text","id","address","formControlName","address","placeholder","Address",1,"address"],[1,"questions-container"],["for","q1"],["name","q1","formControlName","question1","id","q1",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-danger mt-2",4,"ngIf"],["type","text","id","a1","formControlName","answer1","name","a1","required","","placeholder","Answer",1,"form-control"],["for","q2"],["name","q2","formControlName","question2","id","q2",1,"form-select"],["type","text","id","a2","formControlName","answer2","name","a2","required","","placeholder","Answer",1,"form-control"],["for","q3"],["name","q3","formControlName","question3","id","q3",1,"form-select"],["type","text","id","a3","formControlName","answer3","name","a3","placeholder","Answer","required","",1,"form-control"],["type","submit","id","submit","value","Register Account",3,"disabled"],[3,"value"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return r.register()}),e.TgZ(3,"div",3)(4,"div",4)(5,"h1"),e._uU(6,"Register"),e.qZA(),e._UZ(7,"br")(8,"input",5)(9,"br")(10,"br")(11,"input",6)(12,"br")(13,"br")(14,"input",7)(15,"br")(16,"br")(17,"input",8)(18,"br")(19,"br")(20,"input",9)(21,"br")(22,"br")(23,"input",10)(24,"br"),e.qZA(),e.TgZ(25,"div",11)(26,"label",12),e._uU(27,"Question"),e.qZA(),e._UZ(28,"br"),e.TgZ(29,"select",13),e.YNc(30,C,2,2,"option",14),e.qZA(),e._UZ(31,"br"),e.YNc(32,T,2,1,"div",15),e._UZ(33,"input",16)(34,"br"),e.TgZ(35,"label",17),e._uU(36,"Question"),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"select",18),e.YNc(39,P,2,2,"option",14),e.qZA(),e._UZ(40,"br"),e.YNc(41,I,2,1,"div",15),e._UZ(42,"input",19)(43,"br"),e.TgZ(44,"label",20),e._uU(45,"Question"),e.qZA(),e._UZ(46,"br"),e.TgZ(47,"select",21),e.YNc(48,A,2,2,"option",14),e.qZA(),e._UZ(49,"br"),e.YNc(50,M,2,1,"div",15),e._UZ(51,"input",22)(52,"br"),e.qZA(),e._UZ(53,"input",23)(54,"br"),e.qZA()()()()),2&i&&(e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(28),e.Q6J("ngForOf",r.qArr1),e.xp6(2),e.Q6J("ngIf",r.registerForm.controls.question1.invalid&&(r.registerForm.controls.question1.dirty||r.registerForm.controls.question1.touched)),e.xp6(7),e.Q6J("ngForOf",r.qArr2),e.xp6(2),e.Q6J("ngIf",r.registerForm.controls.question2.invalid&&(r.registerForm.controls.question2.dirty||r.registerForm.controls.question2.touched)),e.xp6(7),e.Q6J("ngForOf",r.qArr3),e.xp6(2),e.Q6J("ngIf",r.registerForm.controls.question3.invalid&&(r.registerForm.controls.question3.dirty||r.registerForm.controls.question3.touched)),e.xp6(3),e.Q6J("disabled",!r.registerForm.valid))},dependencies:[c.sg,c.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".main-container[_ngcontent-%COMP%]{width:100%;background-color:#6dc89a;margin-top:50px;margin-bottom:50px}.form-container[_ngcontent-%COMP%]{width:40%;margin:0 auto;padding-top:50px;background-color:#86d3b9;box-shadow:5px 10px 15px #4d5853;border-radius:60px}form[_ngcontent-%COMP%]{width:400px;margin:0 auto;padding-bottom:100px;text-align:center}h1[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:30px}.register-container[_ngcontent-%COMP%]{background-color:#87c5a3;border-radius:10px;padding-bottom:40px;padding-top:30px;margin-bottom:20px}input[_ngcontent-%COMP%]{width:200px;height:40px;margin:0 auto;padding-left:13px}label[_ngcontent-%COMP%]{font-family:League Spartan,Times New Roman,Times,serif;font-size:25px;margin-top:5px;padding-bottom:3px}select[_ngcontent-%COMP%]{width:200px;margin:0 auto}#submit[_ngcontent-%COMP%]{border:none;width:200px;border-radius:60px;background-color:#2dafa4;font-size:20px}#submit[_ngcontent-%COMP%]:hover{color:#fff}"]}),n})(),title:"BCRS: Register"},{path:"verify-email",component:(()=>{var t;class n{constructor(i,r,a){this.fb=i,this.router=r,this.SecurityService=a,this.isLoading=!1,this.emailForm=this.fb.group({email:[null,o.kI.compose([o.kI.required,o.kI.email])]}),this.errorMessage=""}verifyEmail(){this.isLoading=!0;const i=this.emailForm.controls.email.value;this.SecurityService.verifyEmail(i).subscribe({next:r=>{console.log(r),this.router.navigate(["security/verify-security-questions"],{queryParams:{email:i},skipLocationChange:!0})},error:r=>{console.log("Server Error from verifyEmail Call: ",r),404!==r.status?(this.errorMessage="There was a problem verifying your email address. Please contact the system administrator.",this.isLoading=!1):this.errorMessage="The email address you entered was not found."},complete:()=>{this.isLoading=!1}})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(o.qu),e.Y36(l.F0),e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-email"]],decls:17,vars:5,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"form-group"],["src","../../../assets/email-circle-logo.png"],[1,"input-container"],["formControlName","email","type","text","id","email","name","email","placeholder","Email","required","",1,"form-control"],["type","submit","id","submit",1,"btn-btn",3,"disabled"],["routerLink","/security/signin",1,"return"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return r.verifyEmail()}),e.YNc(2,N,2,1,"div",2),e.TgZ(3,"fieldset",3),e._UZ(4,"br")(5,"img",4),e.TgZ(6,"div",5)(7,"h1"),e._uU(8,"Verify your email"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.YNc(10,k,2,0,"div",2),e.qZA(),e.TgZ(11,"button",7),e._uU(12," Submit "),e.YNc(13,J,3,0,"div",2),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"a",8),e._uU(16,"Return"),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("formGroup",r.emailForm),e.xp6(1),e.Q6J("ngIf",r.errorMessage),e.xp6(8),e.Q6J("ngIf",r.emailForm.controls.email.invalid&&(r.emailForm.controls.email.dirty||r.emailForm.controls.email.touched)),e.xp6(1),e.Q6J("disabled",!r.emailForm.valid),e.xp6(2),e.Q6J("ngIf",r.isLoading))},dependencies:[c.O5,l.rH,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".form-container[_ngcontent-%COMP%]{background-color:#86d3b9;padding-bottom:400px;text-align:center}h1[_ngcontent-%COMP%]{margin:30px;font-family:Poppins}input[_ngcontent-%COMP%]{width:300px;height:60px;margin-top:50px;margin-bottom:40px}.input-container[_ngcontent-%COMP%]{width:300px;margin:0 auto}button[_ngcontent-%COMP%]{border:none;background-color:#509791;width:200px;padding:15px;color:#fff;font-size:20px;border-radius:10px;margin-bottom:30px}.return[_ngcontent-%COMP%]{color:#181d1c;text-decoration:none}img[_ngcontent-%COMP%]{margin-top:30px;width:200px}"]}),n})(),title:"BCRS: Verify Email"},{path:"verify-security-questions",component:(()=>{var t;class n{constructor(i,r,a,d){this.route=i,this.router=r,this.securityService=a,this.fb=d,this.sqForm=this.fb.group({answer1:[null,o.kI.compose([o.kI.required])],answer2:[null,o.kI.compose([o.kI.required])],answer3:[null,o.kI.compose([o.kI.required])]}),this.selectedSecurityQuestions=[],this.question1="",this.question2="",this.question3="",this.errorMessage="",this.isLoadingLabels=!0,this.isLoadingSubmit=!1,this.email=this.route.snapshot.queryParamMap.get("email")??"",console.log("Email Address:",this.email),this.email?this.securityService.findSelectedSecurityQuestions(this.email).subscribe({next:m=>{this.selectedSecurityQuestions=m.selectedSecurityQuestions,console.log("Users selected security questions",this.selectedSecurityQuestions)},error:m=>{console.log("Server Error from findSelectedSecurityQuestions Call:",m),404!==m.status?(this.errorMessage="there was a problem verifying your security questions. Please try again",this.isLoadingLabels=!1):this.errorMessage="the email address you entered wasn't found"},complete:()=>{this.question1=this.selectedSecurityQuestions[0].question,this.question2=this.selectedSecurityQuestions[1].question,this.question3=this.selectedSecurityQuestions[2].question,this.isLoadingLabels=!1}}):this.router.navigate(["/security/forgot-password"])}verifySecurityQuestions(){this.isLoadingSubmit=!0,console.log(this.sqForm.value);let i=[{question:this.question1,answer:this.sqForm.controls.answer1.value},{question:this.question2,answer:this.sqForm.controls.answer2.value},{question:this.question3,answer:this.sqForm.controls.answer3.value}];console.log("Employee provided security questions",i),this.securityService.verifySecurityQuestions(this.email,i).subscribe({next:r=>{console.log("Response from verifySecurityQuestions Call",r),this.router.navigate(["/security/reset-password"],{queryParams:{email:this.email},skipLocationChange:!0})},error:r=>{if(r.error.message)return this.errorMessage=r.error.message,void console.error("Server Error from verifySecurityQuestions Call:",r.error.message);console.error("Server Error from verifySecurityQuestions Call:",r),this.errorMessage="There was a problem verifying your security questions. Please try again",this.isLoadingSubmit=!1},complete:()=>{this.isLoadingSubmit=!1}})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(g),e.Y36(o.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-security-questions"]],decls:21,vars:12,consts:[[3,"formGroup","ngSubmit"],["src","../../../assets/snek.jpg","alt","Logo"],[4,"ngIf"],["class","spinner-border","role","status",4,"ngIf"],["for","q1","class","form-label",4,"ngIf"],["type","text","formControlName","answer1","placeholder","Please enter answer here",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","q2","class","form-label",4,"ngIf"],["type","text","formControlName","answer2","placeholder","Please enter answer here",1,"form-control"],["for","q3","class","form-label",4,"ngIf"],["type","text","formControlName","answer3","placeholder","Please enter answer here",1,"form-control"],["type","submit","id","submit",3,"disabled"],["routerLink","/home",1,"return-home"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["for","q1",1,"form-label"],["for","q2",1,"form-label"],["for","q3",1,"form-label"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,r){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.verifySecurityQuestions()}),e.TgZ(1,"fieldset"),e._UZ(2,"img",1),e.TgZ(3,"h1"),e._uU(4,"Please verify your security questions"),e.qZA(),e.YNc(5,Y,3,1,"div",2),e.YNc(6,L,3,0,"div",3),e.YNc(7,R,2,1,"label",4),e._UZ(8,"input",5),e.YNc(9,V,2,1,"div",6),e.YNc(10,z,2,1,"label",7),e._UZ(11,"input",8),e.YNc(12,G,2,1,"div",6),e.YNc(13,B,2,1,"label",9),e._UZ(14,"input",10),e.YNc(15,$,2,1,"div",6),e.qZA(),e.TgZ(16,"button",11),e.YNc(17,H,2,0,"span",2),e.YNc(18,W,3,0,"div",2),e.qZA()(),e.TgZ(19,"a",12),e._uU(20,"Return to the Homepage"),e.qZA()),2&i&&(e.Q6J("formGroup",r.sqForm),e.xp6(5),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!r.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",r.sqForm.controls.answer1.invalid&&(r.sqForm.controls.answer1.dirty||r.sqForm.controls.answer1.touched)),e.xp6(1),e.Q6J("ngIf",!r.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",r.sqForm.controls.answer2.invalid&&(r.sqForm.controls.answer2.dirty||r.sqForm.controls.answer2.touched)),e.xp6(1),e.Q6J("ngIf",!r.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",r.sqForm.controls.answer3.invalid&&(r.sqForm.controls.answer3.dirty||r.sqForm.controls.answer3.touched)),e.xp6(1),e.Q6J("disabled",!r.sqForm.valid),e.xp6(1),e.Q6J("ngIf",!r.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",r.isLoadingSubmit))},dependencies:[c.O5,l.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif;background-color:#fef3cd}h1[_ngcontent-%COMP%]{align-items:center;justify-content:center;font-size:50px;font-weight:500}.question-label[_ngcontent-%COMP%], .answer-input[_ngcontent-%COMP%]{align-items:center;justify-content:center;flex-direction:column}body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;flex-direction:column;gap:30px;background-color:#fef3cd}form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:#18251e}button[_ngcontent-%COMP%]{padding-top:20px;padding-left:1em;padding-right:1em;margin:.25em;border-radius:25px;background-color:#fef3cd;font:#18251e;font-size:20px;cursor:pointer;width:100px;height:50px}fieldset[_ngcontent-%COMP%]{margin:2em 0;padding:1em 2em;border:solid 1px #fef3cd;border-radius:8px;min-width:100px}label[_ngcontent-%COMP%]{display:block;margin-top:1em;font-size:20px;font-weight:300}input[_ngcontent-%COMP%]{padding:5em;border:solid 1px #18251e;background-color:#fff;height:15px;max-height:5%}img[_ngcontent-%COMP%]{height:100px;width:100px;align-items:center}.return-home[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;flex-direction:column;font-size:30px;background-color:#18251e;color:#fef3cd}"]}),n})()},{path:"reset-password",component:(()=>{var t;class n{constructor(i,r,a,d){this.fb=i,this.SecurityService=r,this.route=a,this.router=d,this.isLoading=!1,this.changePasswordForm=this.fb.group({password:[null,o.kI.compose([o.kI.required,o.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.email=this.route.snapshot.queryParamMap.get("email")??"",this.errorMessage="",this.email||(console.log("Sorry. No email address was found"),this.router.navigate(["/security/sign-in"]))}changePassword(){this.isLoading=!0,this.SecurityService.changePassword(this.email,this.changePasswordForm.controls.password.value).subscribe({next:r=>{console.log(r),this.router.navigate(["/security/signin"])},error:r=>{console.log(r),this.errorMessage=r,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(o.qu),e.Y36(g),e.Y36(l.gz),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],decls:21,vars:5,consts:[[1,"container","mt-5"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-8","col-md-10"],[1,"card","shadow","p-4","margin-top"],[1,"form","row","g-3",3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"mb-3","form-group"],[1,"row"],[1,"col-md-12"],[1,"label-input"],["for","password",1,"form-label"],["type","password","formControlName","password",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["type","submit","id","submit","value","Change Password",1,"d-block",3,"disabled"],[4,"ngIf"],["routerLink","/security/signin",1,"text-underline-hover","text","dark"],[1,"col-12"],[1,"alert","alert-danger"],[1,"alert","alert-danger","mt-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return r.changePassword()}),e.YNc(5,K,4,1,"div",5),e.TgZ(6,"fieldset",6)(7,"legend"),e._uU(8,"Change Password"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),e._uU(13,"Password"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.YNc(15,re,3,2,"div",12),e.qZA()()(),e.TgZ(16,"button",13),e._uU(17," Change Password "),e.YNc(18,oe,3,0,"div",14),e.qZA()()(),e.TgZ(19,"a",15),e._uU(20,"Return"),e.qZA()()()()),2&i&&(e.xp6(4),e.Q6J("formGroup",r.changePasswordForm),e.xp6(1),e.Q6J("ngIf",r.errorMessage),e.xp6(10),e.Q6J("ngIf",r.changePasswordForm.controls.password.invalid&&(r.changePasswordForm.controls.password.dirty||r.changePasswordForm.controls.password.touched)),e.xp6(1),e.Q6J("disabled",!r.changePasswordForm.valid),e.xp6(2),e.Q6J("ngIf",r.isLoading))},dependencies:[c.O5,l.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".margin-top[_ngcontent-%COMP%]{margin-top:80px}form[_ngcontent-%COMP%]{width:500px;background-color:#86d3b9;margin:50px auto;padding-top:10px;border-radius:30px}legend[_ngcontent-%COMP%]{text-align:center}.label-input[_ngcontent-%COMP%]{margin-left:120px;margin-top:20px}input[_ngcontent-%COMP%]{width:250px}button[_ngcontent-%COMP%]{border:none;padding:20px;width:200px;margin:20px auto;border-radius:60px;background-color:#2dafa4;font-family:Angkor,serif;box-shadow:3px 3px 3px #6d7575}button[_ngcontent-%COMP%]:hover{color:#fff}a[_ngcontent-%COMP%]{color:#000}a[_ngcontent-%COMP%]:hover{color:#3cad91;text-decoration:none}"]}),n})(),title:"BCRS: Reset Password"}]}];let ne=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(ie),l.Bz]}),n})(),se=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,ne,o.UX,o.u5,l.Bz,f.JF]}),n})()}}]);